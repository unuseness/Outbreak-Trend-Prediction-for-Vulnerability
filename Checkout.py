# -*- coding: UTF-8 -*-
# @Time : 2022/9/21 15:11
# @File : Checkout.py

import pandas as pd
from statsmodels.tsa.stattools import adfuller as ADF
from statsmodels.stats.diagnostic import acorr_ljungbox as acorr

def checkout_smooth(ts):
    # 平稳性检验
    dftest = ADF(ts)
    dfoutput = pd.Series(dftest[0:4], index=['Test Statistic', 'p-value', '#Lags Used', 'Number of Observations Used'])
    for key, value in dftest[4].items():  # 单根检验alpha临界值
        dfoutput['Critical Value (%s)' % key] = value
    print(dfoutput)
    if dfoutput['p-value'] > 0.05:  # adf[i]表示对data['close']数据进行1阶差分
        print(u'原始序列经检验不平稳，p值为：%s' % (dftest[1]))
        return 1
    else:
        print(u'原始序列经检验平稳，p值为：%s' % (dftest[1]))
        return 0


def checkout_wnoise(number_vulnerability):
    # 采用LB统计量的方法进行白噪声检验
    p = acorr(number_vulnerability, lags=1)
    if p[1] < 0.05:
        print(u'原始序列非白噪声序列，p值为：%s' % p[1])
    else:
        print(u'原始序列为白噪声序列，p值为：%s' % p[1])
